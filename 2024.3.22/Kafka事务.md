![在这里插入图片描述](https://img-blog.csdnimg.cn/direct/64605b5e473d48258208d629146e65da.png#pic_center)

> *面试官：听说你精通Kafka，那我就考考你吧*
>
> <br/>
>
> *面试官：不用慌尽管说，错了也没关系😊。。。*
>
> <br/>
>
> **以【面试官面试】的形式来分享技术，本期是《Kafka系列》，感兴趣就关注我吧**❤️

## 面试官：生产者重试机制导致Kafka重复消息，知道怎么处理吗

噢噢，Kafka支持**幂等生产者**，可以开启这个模块。

它是这样的，发送消息时同时发送**生产者id、消息序列号**，kafka会根据这些信息避免相同消息被写入。

> <br/>
>
> *面试官思考中…*
>
> <br/>

## 面试官：Kafka事务，应该知道吧

嗯嗯知道的，消息队列事务主要应用在**流式应用程序**中。

比如主题A的消息A过来，消费者的**消费逻辑**是发送消息B给主题B。

所以我们要确保消费者**成功提交偏移量、新消息成功写入**，这两步操作要么成功要么都不成功。

![微信图片_20240322193814](E:\z-relax\my_blog\2024.3.22\微信图片_20240322193814.jpg)

> <br/>
>
> *面试官思考中…*
>
> <br/>

## 面试官：你说的这个场景，不使用事务会有什么问题吗

可能会出现重复消费的问题。

比如消费消息A，但**提交偏移量失败**，但新消息成功写入。此时消息A会被其他消费者**重复消费**。

> <br/>
>
> *面试官思考中…*
>
> <br/>

## 面试官：Kafka事务一般在什么场景下使用呢

我举个例子吧。

例如**支付场景**下有很多流程步骤，用户支付后，发送支付消息过来。消费者扣款后，还需要发送另一个消息去给商家转账。

这个场景下就需要事务的支持了，保证两个步骤的事务性。

> *面试官抓抓脑袋，继续看你的简历......*
>
> <br/>
>
> *得想想考点你不懂的😰*

## 未完待续。。。。。。

好了，今天的分享就先到这，我们下期【Kafka系列】继续。

> **创作不易，不妨点赞、收藏、关注支持一下，各位的支持就是我创作的最大动力**❤️

